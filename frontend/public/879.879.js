(self.webpackChunksvelte_app=self.webpackChunksvelte_app||[]).push([[879],{879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var l=s(379);function n(e,t,s){const l=e.slice();return l[11]=t[s],l[12]=t,l[13]=s,l}function a(e,t,s){const l=e.slice();return l[14]=t[s],l[15]=t,l[16]=s,l}function i(e){let t,s;return{c(){t=(0,l.bG)("div"),s=(0,l.fL)(e[2]),(0,l.Lj)(t,"class","svelte-zciz2j")},m(e,n){(0,l.$T)(e,t,n),(0,l.R3)(t,s)},p(e,t){4&t&&(0,l.rT)(s,e[2])},d(e){e&&(0,l.og)(t)}}}function o(e){let t,s=e[0].related,n=[];for(let t=0;t<s.length;t+=1)n[t]=c(a(e,s,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=(0,l.cS)()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);(0,l.$T)(e,t,s)},p(e,l){if(1&l){let i;for(s=e[0].related,i=0;i<s.length;i+=1){const o=a(e,s,i);n[i]?n[i].p(o,l):(n[i]=c(o),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=s.length}},d(e){(0,l.RM)(n,e),e&&(0,l.og)(t)}}}function c(e){let t,s,n,a,i,o,c,r;function d(){e[6].call(s,e[15],e[16])}function u(){e[7].call(i,e[15],e[16])}return{c(){t=(0,l.bG)("div"),s=(0,l.bG)("input"),a=(0,l.Dh)(),i=(0,l.bG)("input"),o=(0,l.Dh)(),(0,l.Lj)(s,"type","text"),s.readOnly=n=!e[0].show_details,(0,l.Lj)(s,"class","svelte-zciz2j"),(0,l.Lj)(i,"type","number"),(0,l.Lj)(i,"class","number_input svelte-zciz2j"),(0,l.Lj)(t,"class","item related svelte-zciz2j"),(0,l.VH)(t,"show_details",e[0].show_details)},m(n,h){(0,l.$T)(n,t,h),(0,l.R3)(t,s),(0,l.Bm)(s,e[14].name),(0,l.R3)(t,a),(0,l.R3)(t,i),(0,l.Bm)(i,e[14].value),(0,l.R3)(t,o),c||(r=[(0,l.oL)(s,"input",d),(0,l.oL)(i,"input",u)],c=!0)},p(a,o){e=a,1&o&&n!==(n=!e[0].show_details)&&(s.readOnly=n),1&o&&s.value!==e[14].name&&(0,l.Bm)(s,e[14].name),1&o&&(0,l.sC)(i.value)!==e[14].value&&(0,l.Bm)(i,e[14].value),1&o&&(0,l.VH)(t,"show_details",e[0].show_details)},d(e){e&&(0,l.og)(t),c=!1,(0,l.j7)(r)}}}function r(e){let t,s,n;return{c(){t=(0,l.bG)("button"),t.textContent="add related keyword",(0,l.Lj)(t,"class","svelte-zciz2j")},m(a,i){(0,l.$T)(a,t,i),s||(n=(0,l.oL)(t,"click",e[8]),s=!0)},p:l.ZT,d(e){e&&(0,l.og)(t),s=!1,n()}}}function d(e){let t,s,n,a,i;function o(){e[9].call(s,e[12],e[13])}return{c(){t=(0,l.bG)("div"),s=(0,l.bG)("input"),(0,l.Lj)(s,"type","text"),s.readOnly=n=!e[0].show_details,(0,l.Lj)(s,"class","svelte-zciz2j"),(0,l.Lj)(t,"class","item alias svelte-zciz2j"),(0,l.VH)(t,"show_details",e[0].show_details)},m(n,c){(0,l.$T)(n,t,c),(0,l.R3)(t,s),(0,l.Bm)(s,e[11]),a||(i=(0,l.oL)(s,"input",o),a=!0)},p(a,i){e=a,1&i&&n!==(n=!e[0].show_details)&&(s.readOnly=n),1&i&&s.value!==e[11]&&(0,l.Bm)(s,e[11]),1&i&&(0,l.VH)(t,"show_details",e[0].show_details)},d(e){e&&(0,l.og)(t),a=!1,i()}}}function u(e){let t,s,n;return{c(){t=(0,l.bG)("button"),t.textContent="add alias",(0,l.Lj)(t,"class","svelte-zciz2j")},m(a,i){(0,l.$T)(a,t,i),s||(n=(0,l.oL)(t,"click",e[10]),s=!0)},p:l.ZT,d(e){e&&(0,l.og)(t),s=!1,n()}}}function h(e){let t,s;return{c(){t=(0,l.bG)("h2"),s=(0,l.fL)(e[1]),(0,l.cz)(t,"color","red"),(0,l.Lj)(t,"class","svelte-zciz2j")},m(e,n){(0,l.$T)(e,t,n),(0,l.R3)(t,s)},p(e,t){2&t&&(0,l.rT)(s,e[1])},d(e){e&&(0,l.og)(t)}}}function m(e){let t,s,a,c,m,f,p,g,v,w,j,_,b,$,z,L,y,R,G,T,k,x,C=e[0].show_details?"save":"show/edit details";function D(e,t){return e[0].show_details?o:i}let N=D(e),O=N(e),B=e[0].show_details&&r(e),S=e[0].aliases,H=[];for(let t=0;t<S.length;t+=1)H[t]=d(n(e,S,t));let V=e[0].show_details&&u(e),U=e[1]&&h(e);return{c(){t=(0,l.bG)("div"),s=(0,l.bG)("div"),a=(0,l.bG)("input"),c=(0,l.Dh)(),m=(0,l.bG)("div"),f=(0,l.bG)("h1"),f.textContent="related",p=(0,l.Dh)(),g=(0,l.bG)("div"),O.c(),v=(0,l.Dh)(),B&&B.c(),w=(0,l.Dh)(),j=(0,l.bG)("div"),_=(0,l.bG)("h1"),_.textContent="aliases",b=(0,l.Dh)(),$=(0,l.bG)("div");for(let e=0;e<H.length;e+=1)H[e].c();z=(0,l.Dh)(),V&&V.c(),L=(0,l.Dh)(),y=(0,l.bG)("button"),R=(0,l.fL)(C),G=(0,l.Dh)(),U&&U.c(),T=(0,l.cS)(),(0,l.Lj)(a,"type","text"),(0,l.Lj)(a,"class","svelte-zciz2j"),(0,l.Lj)(s,"class","name svelte-zciz2j"),(0,l.Lj)(f,"class","mini-title svelte-zciz2j"),(0,l.Lj)(g,"class","content svelte-zciz2j"),(0,l.VH)(g,"show_details",e[0].show_details),(0,l.Lj)(m,"class","section related-section svelte-zciz2j"),(0,l.Lj)(_,"class","mini-title svelte-zciz2j"),(0,l.Lj)($,"class","content svelte-zciz2j"),(0,l.VH)($,"show_details",e[0].show_details),(0,l.Lj)(j,"class","section alias-section svelte-zciz2j"),(0,l.Lj)(y,"class","svelte-zciz2j"),(0,l.Lj)(t,"class","keyword-main svelte-zciz2j")},m(n,i){(0,l.$T)(n,t,i),(0,l.R3)(t,s),(0,l.R3)(s,a),(0,l.Bm)(a,e[0].name),(0,l.R3)(t,c),(0,l.R3)(t,m),(0,l.R3)(m,f),(0,l.R3)(m,p),(0,l.R3)(m,g),O.m(g,null),(0,l.R3)(g,v),B&&B.m(g,null),(0,l.R3)(t,w),(0,l.R3)(t,j),(0,l.R3)(j,_),(0,l.R3)(j,b),(0,l.R3)(j,$);for(let e=0;e<H.length;e+=1)H[e].m($,null);(0,l.R3)($,z),V&&V.m($,null),(0,l.R3)(t,L),(0,l.R3)(t,y),(0,l.R3)(y,R),(0,l.$T)(n,G,i),U&&U.m(n,i),(0,l.$T)(n,T,i),k||(x=[(0,l.oL)(a,"input",e[5]),(0,l.oL)(y,"click",e[3])],k=!0)},p(e,[t]){if(1&t&&a.value!==e[0].name&&(0,l.Bm)(a,e[0].name),N===(N=D(e))&&O?O.p(e,t):(O.d(1),O=N(e),O&&(O.c(),O.m(g,v))),e[0].show_details?B?B.p(e,t):(B=r(e),B.c(),B.m(g,null)):B&&(B.d(1),B=null),1&t&&(0,l.VH)(g,"show_details",e[0].show_details),1&t){let s;for(S=e[0].aliases,s=0;s<S.length;s+=1){const l=n(e,S,s);H[s]?H[s].p(l,t):(H[s]=d(l),H[s].c(),H[s].m($,z))}for(;s<H.length;s+=1)H[s].d(1);H.length=S.length}e[0].show_details?V?V.p(e,t):(V=u(e),V.c(),V.m($,null)):V&&(V.d(1),V=null),1&t&&(0,l.VH)($,"show_details",e[0].show_details),1&t&&C!==(C=e[0].show_details?"save":"show/edit details")&&(0,l.rT)(R,C),e[1]?U?U.p(e,t):(U=h(e),U.c(),U.m(T.parentNode,T)):U&&(U.d(1),U=null)},i:l.ZT,o:l.ZT,d(e){e&&(0,l.og)(t),O.d(),B&&B.d(),(0,l.RM)(H,e),V&&V.d(),e&&(0,l.og)(G),U&&U.d(e),e&&(0,l.og)(T),k=!1,(0,l.j7)(x)}}}function f(e,t,s){let n,{data:a}=t,{all_keywords:i}=t,o="";return e.$$set=e=>{"data"in e&&s(0,a=e.data),"all_keywords"in e&&s(4,i=e.all_keywords)},e.$$.update=()=>{1&e.$$.dirty&&s(2,n=a.related.map(((e,t)=>`${e.name}:${e.value}`)).join(", "))},[a,o,n,()=>{if(a.show_details){const e=a.valid(i);e.valid?(s(0,a.show_details=!1,a),s(1,o="")):s(1,o=e.message)}else s(0,a.show_details=!0,a),s(1,o="")},i,function(){a.name=this.value,s(0,a)},function(e,t){e[t].name=this.value,s(0,a)},function(e,t){e[t].value=(0,l.sC)(this.value),s(0,a)},()=>{s(0,a.related=[...a.related,{name:"",value:null}],a)},function(e,t){e[t]=this.value,s(0,a)},()=>{s(0,a.aliases=[...a.aliases,""],a)}]}class p extends l.f_{constructor(e){super(),(0,l.S1)(this,e,f,m,l.N8,{data:0,all_keywords:4})}}const g=p;class v{constructor(e,t,s,l,n){this.name=e,this.aliases=t,this.related=s,this.category=l,this.show_details=n}static NewInst(){return new v("",[],[],!1,!0)}toJSON(){return JSON.stringify({name:this.name,aliases:this.aliases,related:this.related,category:this.category})}valid(e){if(!this.name)return{valid:!1,message:"missing keyword name"};if(e.filter((e=>e.name===this.name)).length>1)return{valid:!1,message:`keyword ${this.name} already exists`};let t=[];return this.related.forEach((s=>{let l=!1;e.forEach((e=>{e.name==this.name&&(l=!0)})),l||t.push(s.name)})),{valid:0===t.length,message:`invalid params: ${JSON.stringify(t)}`}}}function w(e,t,s){const l=e.slice();return l[6]=t[s],l}function j(e){let t,s;return t=new g({props:{data:e[6],all_keywords:e[0]}}),{c(){(0,l.YC)(t.$$.fragment)},m(e,n){(0,l.ye)(t,e,n),s=!0},p(e,s){const l={};1&s&&(l.data=e[6]),1&s&&(l.all_keywords=e[0]),t.$set(l)},i(e){s||((0,l.Ui)(t.$$.fragment,e),s=!0)},o(e){(0,l.et)(t.$$.fragment,e),s=!1},d(e){(0,l.vp)(t,e)}}}function _(e){let t,s,n,a,i,o,c,r,d,u,h,m,f,p=Object.values(e[0]).sort(b),g=[];for(let t=0;t<p.length;t+=1)g[t]=j(w(e,p,t));const v=e=>(0,l.et)(g[e],1,1,(()=>{g[e]=null}));return{c(){t=(0,l.bG)("h1"),t.textContent="keyword mappings create/edit",s=(0,l.Dh)(),n=(0,l.bG)("div"),a=(0,l.bG)("button"),a.textContent="import and append mappings json",i=(0,l.Dh)(),o=(0,l.bG)("button"),o.textContent="export mappings json",c=(0,l.Dh)(),r=(0,l.bG)("div");for(let e=0;e<g.length;e+=1)g[e].c();d=(0,l.Dh)(),u=(0,l.bG)("button"),u.textContent="add keyword input",(0,l.Lj)(n,"class","top_buttons svelte-pfstwo"),(0,l.Lj)(r,"class","keywords svelte-pfstwo")},m(p,v){(0,l.$T)(p,t,v),(0,l.$T)(p,s,v),(0,l.$T)(p,n,v),(0,l.R3)(n,a),(0,l.R3)(n,i),(0,l.R3)(n,o),(0,l.$T)(p,c,v),(0,l.$T)(p,r,v);for(let e=0;e<g.length;e+=1)g[e].m(r,null);(0,l.R3)(r,d),(0,l.R3)(r,u),h=!0,m||(f=[(0,l.oL)(a,"click",e[1]),(0,l.oL)(u,"click",e[2])],m=!0)},p(e,[t]){if(1&t){let s;for(p=Object.values(e[0]).sort(b),s=0;s<p.length;s+=1){const n=w(e,p,s);g[s]?(g[s].p(n,t),(0,l.Ui)(g[s],1)):(g[s]=j(n),g[s].c(),(0,l.Ui)(g[s],1),g[s].m(r,d))}for((0,l.dv)(),s=p.length;s<g.length;s+=1)v(s);(0,l.gb)()}},i(e){if(!h){for(let e=0;e<p.length;e+=1)(0,l.Ui)(g[e]);h=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)(0,l.et)(g[e]);h=!1},d(e){e&&(0,l.og)(t),e&&(0,l.og)(s),e&&(0,l.og)(n),e&&(0,l.og)(c),e&&(0,l.og)(r),(0,l.RM)(g,e),m=!1,(0,l.j7)(f)}}}const b=(e,t)=>e.name<t.name||!t.name;function $(e,t,s){let l=[];return[l,async()=>{const e=await undefined.files[fileInput.files.length-1].text();let t=JSON.parse(e),s=new v(t.name,t.aliases,t.related,t.category);l.push(s)},()=>{l.push(v.NewInst()),s(0,l=[...l])}]}class z extends l.f_{constructor(e){super(),(0,l.S1)(this,e,$,_,l.N8,{})}}const L=z;function y(e){let t,s,n,a;return n=new L({}),{c(){t=(0,l.bG)("title"),t.textContent="keyword input form",s=(0,l.Dh)(),(0,l.YC)(n.$$.fragment)},m(e,i){(0,l.$T)(e,t,i),(0,l.$T)(e,s,i),(0,l.ye)(n,e,i),a=!0},p:l.ZT,i(e){a||((0,l.Ui)(n.$$.fragment,e),a=!0)},o(e){(0,l.et)(n.$$.fragment,e),a=!1},d(e){e&&(0,l.og)(t),e&&(0,l.og)(s),(0,l.vp)(n,e)}}}class R extends l.f_{constructor(e){super(),(0,l.S1)(this,e,null,y,l.N8,{})}}const G=R}}]);